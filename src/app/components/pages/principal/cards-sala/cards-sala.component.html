<div>
  <div
    [ngStyle]="{ 'background-color': corDoCard() }"
    class="card"
    (click)="toggleCard()"
  >
    {{ numSala }}
  </div>
</div>
<div class="overlay" *ngIf="exibirCard" (click)="toggleCard()">
  <div class="modal-card" (click)="$event.stopPropagation()">
    <h5 class="card-title"> Sala {{ numSala }}</h5>
    <p><strong>Tipo: </strong> {{ sala.tipoSala }}</p>

    <ng-container *ngIf="!salaDisponivel && sala.status === 'reservado' && sala.reserva as reserva">
      <p class="card-text">
        <strong>Professor:</strong> {{ reserva.professor }}
      </p>
      <p class="card-text">
        <strong>Disciplina:</strong> {{ reserva.materia }}
      </p>
      <p class="card-text">
        <strong>Turma:</strong> {{ reserva.turma }}
      </p>
    </ng-container>
    
    <p class="card-text" *ngIf="!salaDisponivel && sala.status === 'indisponivel'">Indisponível</p>

<!--<div class="overlay" *ngIf="exibirCard" (click)="toggleCard()">
  <div class="modal-card" (click)="$event.stopPropagation()">
    <h5 class="card-title"> Sala {{ numSala }}</h5>
    <p><strong>Tipo: </strong> {{ sala.tipoSala }}</p>
    <p class="card-text">Professor: Aroldo</p>
    <p class="card-text">Disciplina: sei lá bixo</p>
    <p class="card-text">Turma: 3h3</p> -->

    <button mat-raised-button class="fechar-button" (click)="toggleCard()">
      Fechar
    </button>
    <button
      mat-raised-button
      class="removerSala-button ml-2"
      *ngIf="mostrarExcluirBotao"
      (click)="onRemoverSala()"
    >
      Remover sala
    </button>
    <button
      mat-raised-button
      class="editarSala-button ml-2"
      *ngIf="mostrarEditarBotao"
      (click)="onEditarSala()"
    >
      Editar sala
    </button>

<p *ngIf="salaDisponivel && isProfessor" class="disponivel-texto">
  Status: Disponível
</p>

<button
  mat-raised-button
  class="reservarSala-button ml-2"
  (click)="toggleReservaCard()"
  *ngIf="botaoReservarSala"
>
  Reservar sala
</button>

    <div *ngIf="mostrarReservaCard" class="overlay"></div>

    <!-- Terminar Card de reserva de sala -->
    <mat-card *ngIf="mostrarReservaCard" class="reserva-card">
      <mat-card-title class="card-title">
        Reserva de Sala
        <span class="num-sala">Sala {{ numSala }}</span>
      </mat-card-title>
      <p><strong>Professor: {{nomeDoProfessor}} </strong></p>

      <form [formGroup]="formulario">
        <mat-form-field>
          <mat-label><strong>Matéria: </strong></mat-label>
          <input
            type="text"
            matInput
            formControlName="materia"
            placeholder="Digite o nome da matéria "
          />
          <mat-error *ngIf="formulario.controls['materia'].hasError('required') && formulario.controls['materia'].touched">
            A matéria é obrigatória
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <mat-label><strong>Turma: </strong></mat-label>
          <input
            type="text"
            matInput
            formControlName="turma"
            placeholder="Digite o nome da turma "
          />
          <mat-error *ngIf="formulario.controls['turma'].hasError('required') && formulario.controls['turma'].touched">
            A Turma é obrigatória
          </mat-error>
        </mat-form-field>

      <mat-form-field>
        <mat-label>Data da Reserva</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="data">
        <mat-hint>DD/MM/AAAA</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-error *ngIf="formulario.controls['data'].hasError('required') && formulario.controls['data'].touched">
          A data é obrigatória
        </mat-error>
      </mat-form-field>
    </form>

      <mat-card-content>
        <p>Você está prestes a reservar a sala {{ numSala }}.</p>
        <button
          mat-raised-button
          class="fechar-button"
          (click)="closeReservaCard()"
        >
          Fechar
        </button>

        <button
          mat-raised-button
          class="button-reservar ml-2"
          (click)="confirmarReserva()"
        >
          Confirmar Reserva
        </button>

        <mat-card *ngIf="mostrarConfirmacaoFinal" class="confirmacao-final-card">
          <mat-card-title>Confirmação Final</mat-card-title>
          <p>Deseja realmente reservar a sala {{ numSala }}?</p>
          <button mat-raised-button color="primary" (click)="confirmarReservaFinal()">
            OK
          </button>
          <button mat-raised-button color="warn" (click)="cancelarConfirmacaoFinal()">
            Cancelar
          </button>
        </mat-card>
      </mat-card-content>
    </mat-card>
  </div>
</div>
